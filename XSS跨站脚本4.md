#### XSS的防御

1. 使用XSS Filter

   XSS Filter的作用是过滤用户（客户端）提交的有害信息，从而达到防范XSS攻击的效果

   - 输入过滤，永远不要相信用户的输入，是网站开发的基本常识，对于用户输入一定要过滤、过滤、再过滤。适合sql注入

     1. 输入验证，对用户提交的数据进行有效验证，仅接受指定长度范围内的，采用适当格式的内容提交，阻止或者忽略除此之外的其他任何数据

        - 输入是否仅包含合法的字符
        - 输入字符串是否超过最大长度限制
        - 输入如果为数字，数字是否在指定的范围内
        - 输入是否符合特殊的格式要求，如E-MAIL地址，IP地址等

     2. 数据消毒，过滤和净化有害的输入

        - 输出编码，HTML编码主要使用对应的HTML实体代替字符

        - 黑白名单，不管是采用输入过滤还是输出过滤，都是针对数据信息进行黑或白名单式的过滤。

          黑白名单是信息安全中最基础也是应用最广的一组策略，如果设置了黑白名单，就只能按照设定的规则进行活动。

          黑名单，非允许数据
          
          白名单，允许的数据

2. 防御DOM-XSS

   避免客户端文档重写、重定向或其他敏感操作。比较难防御，前后端分离后要频繁修改DOM数，比较容易出现问题

#### beef工具

XSS漏洞的利用平台

1. 启动beef，集成在kali中，路径：/usr/share/beef-xss，配置文件：config.yaml，要注意不能启动之前要修改配置文件中默认的用户名和密码
2. 利用beef进行浏览器劫持
3. cookie窃取和欺骗：固定会话攻击
4. 利用浏览器漏洞getshell