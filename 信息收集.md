渗透测试前最重要一步就是信息收集，收集服务器的配置信息和网站的敏感信息，包括域名和子域名、目标网站系统，CMS指纹、目标网站的真实IP、开放的端口等。

收集信息互联网渠道：论坛、公告板、新闻组、媒体文章、博客、社交网络、GitHub，其他商业或者非商业性网站

利用各种搜索引擎获取相关数据，例如谷歌、雅虎、必应、百度等，包含：DNS服务器、路由关系、whois数据库、电子邮件地址、电话号码、个人信息以及用户账户等等，收集信息越多，渗透测试成功率越高

1. 收集域名信息

   1. whois查询，邮箱反查、电话反查、注册人反查
   2. 子域名查询，netcraft查询、网页证书查看
      1. 域传送漏洞，DNS区域传送（DNS ZONE transfer）指的是一台备用服务器使用来自主服务器的数据刷新自己的域（zone）数据库。这为运行中的DNS服务提供了一定冗余度，其目的是为了防止主的域名服务器因意外故障边得不可用时影响到整个域名解析。一般来说，DNS区域传送操作只在网络里真的有备用域名DNS服务器时才有必要用到，但许多DNS服务器却被配置成只要有client发出请求，就会向对方提供一个zone数据库的详细信息，所以说允许不受信任的因特网用户执行DNS区域传送（zone transfer）操作是后果最为严重的错误配置之一，可以使用dig工具来检测域传送漏洞，dig axfr @dns.example.com example.com
      2. 实例：dig @本机IP vulhub.org，通过域传送漏洞可以获得子域名信息和网站子域名对应的IP地址，比较准确
      3. 子域名爆破，使用子域名挖掘机等工具，通过特定的字典来挖掘子域名信息。kali下的dnsrecon工具
   3. 备案信息查询

2. 收集敏感信息

   1. 通过google浏览器+构造特殊的关键字语法，搜索互联网上的相关敏感信息
   2. 通过Burp Suite的repeater功能同样可以获取

3. 收集子域名信息

   如果目标网络规模较大，主域是重点防护区域，尽量从子域名入手

   1. 子域名检测工具推荐：layer子域名挖掘机、sublist3r、subdomainbrute
      1. layer子域名挖掘机，直接输入域名进行扫描
   2. subdomainbrute可以用小字典递归发现三级、四级、甚至五级域名
   3. 搜索引擎枚举，site:baidu.com
   4. 第三方聚合应用枚举，dnsdumpster.com
   5. 证书透明度公开日志枚举，crt.sh，censys.io

4. 收集常用端口信息

   通过扫描服务器开放端口以及从端口判断服务器上存在的服务，方便渗透目标服务器

   经常使用工具：nmap、masscan、zmap，御剑高速TCP端口扫描工具

   常用端口和说明应熟悉

5. 指纹识别

   CMS，content management system，文章系统，对目标服务器的识别很有必要，只有识别出相应的web容器或者CMS，才能查找出相关的漏洞，之后才能进行对应的渗透操作

6. 查找真实IP

6. google hacking语法使用

